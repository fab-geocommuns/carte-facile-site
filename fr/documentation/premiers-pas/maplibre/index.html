<!-- ---
title: Guide pour MapLibre GL JS
layout: layouts/docs.njk
description: Guide complet pour l'utilisation de CarteFacile avec MapLibre GL JS.
eleventyNavigation:
  key: MapLibre GL JS
  parent: Premiers pas
  order: 3
  nav: docs
---
 -->
<p>CarteFacile simplifie l'utilisation de MapLibre GL JS en fournissant des styles et composants pr√™ts √† l'emploi. Ce guide vous accompagne de l'installation √† l'utilisation avanc√©e.</p>
<h2 id="installation" tabindex="-1">üöÄ Installation <a class="header-anchor" href="#installation">#</a></h2>
<h3 id="prerequis" tabindex="-1">Pr√©requis <a class="header-anchor" href="#prerequis">#</a></h3>
<ul>
<li>Node.js (version 14 ou sup√©rieure)</li>
<li>npm (ou yarn)</li>
</ul>
<h3 id="methode-1-installation-via-npm-recommande" tabindex="-1">M√©thode 1 : Installation via npm (recommand√©) <a class="header-anchor" href="#methode-1-installation-via-npm-recommande">#</a></h3>
<pre class="language-bash" tabindex="0"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> carte-facile maplibre-gl</code></pre>
<h3 id="methode-2-installation-via-cdn" tabindex="-1">M√©thode 2 : Installation via CDN <a class="header-anchor" href="#methode-2-installation-via-cdn">#</a></h3>
<p>Pour les projets simples ou les prototypes rapides, vous pouvez utiliser les liens CDN :</p>
<pre class="language-html" tabindex="0"><code class="language-html"><span class="token comment">&lt;!-- Importation des biblioth√®ques MapLibre --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/maplibre-gl@^5.1.0/dist/maplibre-gl.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/maplibre-gl@^5.1.0/dist/maplibre-gl.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token comment">&lt;!-- Importation de la biblioth√®que Carte facile --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/carte-facile@0.4.10/dist/carte-facile.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>
<h2 id="premiers-pas" tabindex="-1">üó∫Ô∏è Premiers pas <a class="header-anchor" href="#premiers-pas">#</a></h2>
<h3 id="1-configuration-de-base" tabindex="-1">1. Configuration de base <a class="header-anchor" href="#1-configuration-de-base">#</a></h3>
<p>Ajoutez un conteneur pour votre carte :</p>
<pre class="language-html" tabindex="0"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
    <span class="token selector">html, body, #map</span> <span class="token punctuation">{</span> <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>
<h3 id="2-initialisation-de-la-carte" tabindex="-1">2. Initialisation de la carte <a class="header-anchor" href="#2-initialisation-de-la-carte">#</a></h3>
<pre class="language-typescript" tabindex="0"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> mapStyle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'carte-facile'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> maplibregl <span class="token keyword">from</span> <span class="token string">'maplibre-gl'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'maplibre-gl/dist/maplibre-gl.css'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">maplibregl</span><span class="token punctuation">.</span><span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  container<span class="token operator">:</span> <span class="token string">'map'</span><span class="token punctuation">,</span>
  style<span class="token operator">:</span> mapStyle<span class="token punctuation">.</span>ign<span class="token punctuation">.</span>standard<span class="token punctuation">,</span>
  maxZoom<span class="token operator">:</span> <span class="token number">18.9</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>F√©licitations ! Vous avez maintenant une carte fonctionnelle !</strong></p>
<h2 id="personnalisation" tabindex="-1">üé® Personnalisation <a class="header-anchor" href="#personnalisation">#</a></h2>
<h3 id="styles-de-carte-disponibles" tabindex="-1">Styles de carte disponibles <a class="header-anchor" href="#styles-de-carte-disponibles">#</a></h3>
<p>CarteFacile propose plusieurs styles pr√©d√©finis :</p>
<div class="fr-table fr-table--layout-fixed">
  <table>
    <caption></caption>
    <thead>
    <tr>
        <th scope="col">Style</th>
        <th scope="col">Description</th>
    </tr>
    </thead>
    <tbody>
      <tr>
          <td>`mapStyle.ign.simple`</td>
          <td>Style par d√©faut, adapt√© √† la plupart des usages</td>
      </tr>
      <tr>
          <td>`mapStyle.ign.desaturated`</td>
          <td>Version d√©satur√©e, id√©ale pour la datavisualisation</td>
      </tr>
      <tr>
          <td>`mapStyle.ign.aerial`</td>
          <td>Vue photographies a√©riennes et satellite</td>
      </tr>
    </tbody>
  </table>
</div>
<h3 id="fournisseurs-de-donnees" tabindex="-1">Fournisseurs de donn√©es <a class="header-anchor" href="#fournisseurs-de-donnees">#</a></h3>
<div class="fr-table fr-table--layout-fixed">
  <table>
    <caption></caption>
    <thead>
    <tr>
        <th scope="col">Fournisseur</th>
        <th scope="col">Description</th>
        <th scope="col">Disponibilit√©</th>
    </tr>
    </thead>
    <tbody>
      <tr>
          <td>`mapStyle.ign`</td>
          <td>Donn√©es g√©ographiques de l&#39;IGN (France)</td>
          <td>‚úÖ Disponible</td>
      </tr>
      <tr>
          <td>`mapStyle.osm`</td>
          <td>Donn√©es OpenStreetMap</td>
          <td>üõ†Ô∏è √Ä venir</td>
      </tr>
    </tbody>
  </table>
</div>
<h3 id="changer-de-style" tabindex="-1">Changer de style <a class="header-anchor" href="#changer-de-style">#</a></h3>
<p>Pour changer le style d'une carte existante :</p>
<pre class="language-typescript" tabindex="0"><code class="language-typescript">map<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>mapStyle<span class="token punctuation">.</span>ign<span class="token punctuation">.</span>aerial<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="fonctionnalites-avancees" tabindex="-1">‚öôÔ∏è Fonctionnalit√©s avanc√©es <a class="header-anchor" href="#fonctionnalites-avancees">#</a></h2>
<h3 id="controles-de-la-carte" tabindex="-1">Contr√¥les de la carte <a class="header-anchor" href="#controles-de-la-carte">#</a></h3>
<pre class="language-typescript" tabindex="0"><code class="language-typescript"><span class="token comment">// Navigation</span>
<span class="token keyword">const</span> nav <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">maplibregl</span><span class="token punctuation">.</span><span class="token function">NavigationControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">addControl</span><span class="token punctuation">(</span>nav<span class="token punctuation">,</span> <span class="token string">'top-left'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// √âchelle</span>
<span class="token keyword">const</span> scale <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">maplibregl</span><span class="token punctuation">.</span><span class="token function">ScaleControl</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    maxWidth<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span>
    unit<span class="token operator">:</span> <span class="token string">'metric'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">addControl</span><span class="token punctuation">(</span>scale<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="marqueurs-et-popups" tabindex="-1">Marqueurs et popups <a class="header-anchor" href="#marqueurs-et-popups">#</a></h3>
<pre class="language-typescript" tabindex="0"><code class="language-typescript"><span class="token comment">// Marqueur simple</span>
<span class="token keyword">const</span> marker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">maplibregl</span><span class="token punctuation">.</span><span class="token function">Marker</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setLngLat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2.3522</span><span class="token punctuation">,</span> <span class="token number">48.8566</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addTo</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Popup</span>
<span class="token keyword">const</span> popup <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">maplibregl</span><span class="token punctuation">.</span><span class="token function">Popup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setLngLat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2.3522</span><span class="token punctuation">,</span> <span class="token number">48.8566</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setHTML</span><span class="token punctuation">(</span><span class="token string">'&lt;h3>Paris&lt;/h3>&lt;p>La ville lumi√®re&lt;/p>'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addTo</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="gestion-des-donnees" tabindex="-1">Gestion des donn√©es <a class="header-anchor" href="#gestion-des-donnees">#</a></h3>
<pre class="language-typescript" tabindex="0"><code class="language-typescript">map<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Ajout d'une source GeoJSON</span>
  map<span class="token punctuation">.</span><span class="token function">addSource</span><span class="token punctuation">(</span><span class="token string">'points'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'geojson'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'FeatureCollection'</span><span class="token punctuation">,</span>
      features<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">'Feature'</span><span class="token punctuation">,</span>
          geometry<span class="token operator">:</span> <span class="token punctuation">{</span>
            type<span class="token operator">:</span> <span class="token string">'Point'</span><span class="token punctuation">,</span>
            coordinates<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2.3522</span><span class="token punctuation">,</span> <span class="token number">48.8566</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          properties<span class="token operator">:</span> <span class="token punctuation">{</span>
            title<span class="token operator">:</span> <span class="token string">'Paris'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Ajout d'une couche</span>
  map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'points'</span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">'circle'</span><span class="token punctuation">,</span>
    source<span class="token operator">:</span> <span class="token string">'points'</span><span class="token punctuation">,</span>
    paint<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'circle-radius'</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
      <span class="token string-property property">'circle-color'</span><span class="token operator">:</span> <span class="token string">'#ff0000'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="bonnes-pratiques" tabindex="-1">üèÜ Bonnes pratiques <a class="header-anchor" href="#bonnes-pratiques">#</a></h2>
<h3 id="performance" tabindex="-1">Performance <a class="header-anchor" href="#performance">#</a></h3>
<pre class="language-typescript" tabindex="0"><code class="language-typescript"><span class="token comment">// Optimisation des performances</span>
map<span class="token punctuation">.</span>dragRotate<span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span>touchZoomRotate<span class="token punctuation">.</span><span class="token function">disableRotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">setMaxFPS</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="gestion-de-la-memoire" tabindex="-1">Gestion de la m√©moire <a class="header-anchor" href="#gestion-de-la-memoire">#</a></h3>
<pre class="language-typescript" tabindex="0"><code class="language-typescript"><span class="token comment">// Nettoyage des ressources</span>
<span class="token keyword">function</span> <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  map<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Supprimer les r√©f√©rences aux marqueurs, popups, etc.</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="responsive-design" tabindex="-1">Responsive Design <a class="header-anchor" href="#responsive-design">#</a></h3>
<pre class="language-typescript" tabindex="0"><code class="language-typescript"><span class="token comment">// Gestion du redimensionnement</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  map<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="depannage" tabindex="-1">üõ†Ô∏è D√©pannage <a class="header-anchor" href="#depannage">#</a></h2>
<h3 id="problemes-courants" tabindex="-1">Probl√®mes courants <a class="header-anchor" href="#problemes-courants">#</a></h3>
<ol>
<li>
<p><strong>La carte ne s'affiche pas</strong></p>
<ul>
<li>V√©rifiez que le conteneur a une hauteur d√©finie</li>
<li>Assurez-vous que les styles CSS sont bien import√©s</li>
</ul>
</li>
<li>
<p><strong>Les tuiles ne se chargent pas</strong></p>
<ul>
<li>V√©rifiez votre connexion internet</li>
<li>Assurez-vous que le style est correctement configur√©</li>
</ul>
</li>
<li>
<p><strong>Performances faibles</strong></p>
<ul>
<li>R√©duisez le nombre de marqueurs et de sources</li>
<li>Utilisez la clusterisation pour les grands ensembles de donn√©es</li>
</ul>
</li>
</ol>
<h2 id="ressources-supplementaires" tabindex="-1">üìö Ressources suppl√©mentaires <a class="header-anchor" href="#ressources-supplementaires">#</a></h2>
<ul>
<li><a href="https://maplibre.org/maplibre-gl-js/docs/">Documentation officielle MapLibre</a></li>
<li><a href="%22/documentation/exemples%22">Exemples de code</a></li>
<li><a href="%22/documentation/api/index%22">Documentation API</a></li>
</ul>
